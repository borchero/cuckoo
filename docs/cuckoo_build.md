## cuckoo build

Build a Docker image and optionally push with various tags.

### Synopsis


The Docker image is build either with the Docker CLI (using DOCKER_BUILDKIT=1) or with BuildKit
directly if a buildkit host is defined.

The name of the base image can be defined using the following template parameters:

* %r: The URL of the repository, defined by $CI_REGISTRY.
* %p: The base path from a GitLab repository, $CI_PROJECT_PATH. If not found, the build will fail.

The image is uploaded to a repository if any tags are given. Tags for images may be defined with a 
set of templating parameters:

* %t: Either the tag found in $CI_COMMIT_TAG or the most recent tag on this repository's master
	branch. If none of them can be found, building will fail. Must be a valid SemVer 2.0 tag.
* %m: Derived from %t, written as <major>. Fails when %t would fail. Ignored when <major> is 0.
* %n: Derived from %t, written as <major>.<minor>. Fails when %t would fail.
* %r: A valid SemVer2 tag, extracted from the current branch name.
* %h: The hash of the current commit, $CI_COMMIT_SHA. If it cannot be found, building will fail.
* %d: The current date, written as YYYY-MM-dd.
* %@: Will set all of the following tags: %t, %m, %n, latest.


```
cuckoo build [flags]
```

### Options

```
      --arg stringArray        Arguments to set for the image build.
      --buildkit-host string   The host of the BuildKit daemon to use for building images.
      --context string         The context to use for building the image. (default ".")
  -f, --dockerfile string      The path to a directory containing the Dockerfile. (default "./deploy/docker")
  -h, --help                   help for build
      --image string           The path of the image to push to. Ignored if no tag is set. (default "%r/%p")
      --secret stringArray     Secret file to expose to the build (id=<name>,src=<file>).
      --ssh                    Whether to use the host's default SSH daemon to supply SSH keys.
  -t, --tag stringArray        The templates for tags to apply to the image. No push is executed without tag.
```

### Options inherited from parent commands

```
  -v, --verbose   Set verbose output.
```

### SEE ALSO

* [cuckoo](cuckoo.md)	 - Efficient CI/CD for GitLab CI and Kubernetes.

###### Auto generated by spf13/cobra on 24-Mar-2020
